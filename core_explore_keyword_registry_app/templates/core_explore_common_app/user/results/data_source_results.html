{% load xsl_transform_tag %}
{% load staticfiles %}

<link rel="stylesheet" href="{% static 'core_explore_keyword_registry_app/user/css/search/search.css' %}" />
<script src="{% static 'core_explore_keyword_registry_app/user/libs/jquery-shorten/1.1.0/jquery.shorten.js' %}"></script>
<script src="{% static 'core_explore_keyword_registry_app/user/js/search/search.js' %}"></script>

<div class="result-toolbar">
    <div class="filter">
        <button id="result-button-filter{{data_source_index}}" class="result-toolbar-button" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
            <i class="fa fa-sort-amount-desc"></i> Sort
        </button>
        <ul class="dropdown-menu tools-menu filter-dropdown-menu" aria-labelledby="result-button-filter{{data_source_index}}">
            {% for item in data_displayed_sorting_fields %}
            <li class="sort_{{item.field}}"><i class="fa fa-random" aria-hidden="true"></i> {{item.display}}</li>
            {% endfor %}
        </ul>
    </div>
    <button class="result-toolbar-button">
        {% include "core_explore_common_app/user/persistent_query/button_persistent_query.html" with url=get_shareable_link_url %}
    </button>
    {% if exporter_app %}
        <button class="result-toolbar-button">
            {% include "core_exporters_app/user/exporters/list/link_exporters_selector.html" %}
        </button>
    {% endif %}
    <div id="date-toggle" class="toggle-container">
        <label class="switch">
            <input type="checkbox" class="switch-input" />
            <span class="switch-label" data-on="Hide" data-off="Date"></span>
            <span class="handle"></span>
        </label>
    </div>
</div>

{% for result in results %}
    {% xsl_transform_list xml_content=result.xml_content template_id=result.template_info.id template_hash=result.template_info.hash as xml_representation%}
    {% include 'core_explore_common_app/user/results/data_source_info.html' with xml_representation=xml_representation|safe %}
{% empty %}
<h4> No results were found.</h4>
{% endfor %}

{% include 'core_explore_common_app/user/results/data_source_pagination.html'%}

